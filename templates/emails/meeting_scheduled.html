{% load tz %}{# REQUIRED: Must be at the very top #}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Meeting Confirmation</title>
</head>
<body style="font-family: Arial, sans-serif; background:#f3f4f6; padding:20px; margin:0;">

  {# Force the template to render everything in the user's timezone #}
  {% timezone timezone_name %}
  
  <div style="max-width:600px;margin:auto;background:#ffffff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
    
    <div style="background:#4f46e5;color:#fff;padding:24px;text-align:center;">
      <h2 style="margin:0;font-size:24px;">Meeting Confirmed</h2>
      <p style="margin:8px 0 0 0;font-size:14px;opacity:0.9;">
        {{ meeting.proposal.project.title }}
      </p>
    </div>

    <div style="padding:24px;">
      <p style="margin-top:0;font-size:16px;">Hello {{ user.get_full_name|default:user.username }},</p>

      <p style="font-size:15px;line-height:1.6;">
        A <strong>{{ meeting.get_meeting_type_display }}</strong> meeting has been scheduled.
      </p>

      <table width="100%" cellpadding="12" cellspacing="0" style="border-collapse:collapse;background:#f9fafb;border-radius:6px;margin:20px 0;">
        <tr style="border-bottom:1px solid #e5e7eb;">
          <td style="font-weight:600;color:#374151;font-size:14px;">Date</td>
          <td align="right" style="color:#111827;font-size:14px;">
            {{ start_time|date:"l, F j, Y" }}
          </td>
        </tr>
        <tr style="border-bottom:1px solid #e5e7eb;">
          <td style="font-weight:600;color:#374151;font-size:14px;">Time</td>
          <td align="right" style="color:#111827;font-size:14px;">
            {{ start_time|date:"g:i A" }} â€“ {{ end_time|date:"g:i A" }}
          </td>
        </tr>
        <tr style="border-bottom:1px solid #e5e7eb;">
          <td style="font-weight:600;color:#374151;font-size:14px;">Timezone</td>
          <td align="right" style="color:#111827;font-size:14px;">{{ timezone_name }}</td>
        </tr>
        <tr>
          <td style="font-weight:600;color:#374151;font-size:14px;">Freelancer</td>
          <td align="right" style="color:#111827;font-size:14px;">{{ freelancer_name }}</td>
        </tr>
      </table>

      <div style="text-align:center;margin-top:32px;">
        <a href="{{ portal_url }}"
           style="display:inline-block;background:#4f46e5;color:#fff;padding:14px 28px;text-decoration:none;border-radius:6px;font-weight:600;font-size:15px;">
          Open Meeting Portal
        </a>
      </div>
    </div>

    <div style="background:#f9fafb;padding:20px;text-align:center;border-top:1px solid #e5e7eb;">
      <p style="margin:0;font-size:12px;color:#6b7280;">
        <strong>Meeting ID:</strong> {{ meeting.zego_room_id }}
      </p>
    </div>
  </div>

  {% endtimezone %}
</body>
</html>
